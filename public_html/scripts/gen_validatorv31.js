function Validator(e){this.formobj=document.forms[e],this.formobj?(this.formobj.onsubmit?(this.formobj.old_onsubmit=this.formobj.onsubmit,this.formobj.onsubmit=null):this.formobj.old_onsubmit=null,this.formobj._sfm_form_name=e,this.formobj.onsubmit=form_submit_handler,this.addValidation=add_validation,this.setAddnlValidationFunction=set_addnl_vfunction,this.clearAllValidations=clear_all_validations,this.disable_validations=!1,document.error_disp_handler=new sfm_ErrorDisplayHandler,this.EnableOnPageErrorDisplay=validator_enable_OPED,this.EnableOnPageErrorDisplaySingleBox=validator_enable_OPED_SB,this.show_errors_together=!0,this.EnableMsgsTogether=sfm_enable_show_msgs_together):alert("Error: couldnot get Form object "+e)}function set_addnl_vfunction(e){this.formobj.addnlvalidation=e}function sfm_enable_show_msgs_together(){this.show_errors_together=!0,this.formobj.show_errors_together=!0}function clear_all_validations(){for(var e=0;e<this.formobj.elements.length;e++)this.formobj.elements[e].validationset=null}function form_submit_handler(){var bRet=!0;document.error_disp_handler.clear_msgs();for(var itr=0;itr<this.elements.length&&(this.elements[itr].validationset&&!this.elements[itr].validationset.validate()&&(bRet=!1),bRet||this.show_errors_together);itr++);return bRet?!(this.addnlvalidation&&(str=" var ret = "+this.addnlvalidation+"()",eval(str),!ret))||ret:(document.error_disp_handler.FinalShowMsg(),!1)}function add_validation(e,r,t){var a=null;if(arguments.length>3&&(a=arguments[3]),this.formobj){var s=this.formobj[e];s.length&&isNaN(s.selectedIndex)&&(s=s[0]),s?(s.validationset||(s.validationset=new ValidationSet(s,this.show_errors_together)),s.validationset.add(r,t,a),s.validatorobj=this):alert("Error: Couldnot get the input object named: "+e)}else alert("Error: The form object is not set properly")}function validator_enable_OPED(){document.error_disp_handler.EnableOnPageDisplay(!1)}function validator_enable_OPED_SB(){document.error_disp_handler.EnableOnPageDisplay(!0)}function sfm_ErrorDisplayHandler(){this.msgdisplay=new AlertMsgDisplayer,this.EnableOnPageDisplay=edh_EnableOnPageDisplay,this.ShowMsg=edh_ShowMsg,this.FinalShowMsg=edh_FinalShowMsg,this.all_msgs=new Array,this.clear_msgs=edh_clear_msgs}function edh_clear_msgs(){this.msgdisplay.clearmsg(this.all_msgs),this.all_msgs=new Array}function edh_FinalShowMsg(){this.msgdisplay.showmsg(this.all_msgs)}function edh_EnableOnPageDisplay(e){this.msgdisplay=1==e?new SingleBoxErrorDisplay:new DivMsgDisplayer}function edh_ShowMsg(e,r){var t=new Array;t.input_element=r,t.msg=e,this.all_msgs.push(t)}function AlertMsgDisplayer(){this.showmsg=alert_showmsg,this.clearmsg=alert_clearmsg}function alert_clearmsg(e){}function alert_showmsg(e){var r="",t=null;for(var a in e)null==t&&(t=e[a].input_element),r+=e[a].msg+"\n";alert(r),null!=t&&t.focus()}function sfm_show_error_msg(e,r){document.error_disp_handler.ShowMsg(e,r)}function SingleBoxErrorDisplay(){this.showmsg=sb_div_showmsg,this.clearmsg=sb_div_clearmsg}function sb_div_clearmsg(e){show_div_msg(form_error_div_name(e),"")}function sb_div_showmsg(e){var r="<ul>\n";for(var t in e)r+="<li>"+e[t].msg+"</li>\n";r+="</ul>",show_div_msg(form_error_div_name(e),r)}function form_error_div_name(e){var r=null;for(var t in e)if(r=e[t].input_element)break;var a="";return r&&(a=r.form._sfm_form_name+"_errorloc"),a}function DivMsgDisplayer(){this.showmsg=div_showmsg,this.clearmsg=div_clearmsg}function div_clearmsg(e){for(var r in e){show_div_msg(element_div_name(e[r].input_element),"")}}function element_div_name(e){var r=e.form._sfm_form_name+"_"+e.name+"_errorloc";return r=r.replace(/[\[\]]/gi,"")}function div_showmsg(e){var r=null;for(var t in e){null==r&&(r=e[t].input_element),show_div_msg(element_div_name(e[t].input_element),e[t].msg)}null!=r&&r.focus()}function show_div_msg(e,r){if(e.length<=0)return!1;if(document.layers){if(divlayer=document.layers[e],!divlayer)return;divlayer.document.open(),divlayer.document.write(r),divlayer.document.close()}else if(document.all){if(divlayer=document.all[e],!divlayer)return;divlayer.innerHTML=r}else if(document.getElementById){if(divlayer=document.getElementById(e),!divlayer)return;divlayer.innerHTML=r}return divlayer.style.visibility="visible",!1}function ValidationDesc(e,r,t,a){this.desc=r,this.error=t,this.itemobj=e,this.condition=a,this.validate=vdesc_validate}function vdesc_validate(){return null!=this.condition&&!eval(this.condition)||(!!validateInput(this.desc,this.itemobj,this.error)||(this.itemobj.validatorobj.disable_validations=!0,this.itemobj.focus(),!1))}function ValidationSet(e,r){this.vSet=new Array,this.add=add_validationdesc,this.validate=vset_validate,this.itemobj=e,this.msgs_together=r}function add_validationdesc(e,r,t){this.vSet[this.vSet.length]=new ValidationDesc(this.itemobj,e,r,t)}function vset_validate(){for(var e=!0,r=0;r<this.vSet.length&&((e=e&&this.vSet[r].validate())||this.msgs_together);r++);return e}function validateEmail(e){var r=e.match("^(.+)@(.+)$");if(null==r)return!1;if(null!=r[1]){if(null==r[1].match(/^\"?[\w-_\.]*\"?$/))return!1}if(null!=r[2]){if(null==r[2].match(/^[\w-\.]*\.[A-Za-z]{2,4}$/)){if(null==r[2].match(/^\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\]$/))return!1}return!0}return!1}function IsCheckSelected(e,r){var t=!1,a=e.form.elements[e.name];if(a.length){for(var s=-1,n=0;n<a.length;n++)if(a[n].value==r){s=n;break}s>=0&&"1"==a[s].checked&&(t=!0)}else"1"==e.checked&&(t=!0);return t}function TestDontSelectChk(e,r,t){var a;return 0==(a=!IsCheckSelected(e,r))&&(t&&0!=t.length||(t="Can't Proceed as you selected "+e.name),sfm_show_error_msg(t,e)),a}function TestShouldSelectChk(e,r,t){var a;return 0==(a=!!IsCheckSelected(e,r))&&(t&&0!=t.length||(t="You should select"+e.name),sfm_show_error_msg(t,e)),a}function TestRequiredInput(objValue,strError){var ret=!0;return 0==eval(objValue.value.length)&&(strError&&0!=strError.length||(strError=objValue.name+" : Required Field"),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestMaxLen(objValue,strMaxLen,strError){var ret=!0;return eval(objValue.value.length)>eval(strMaxLen)&&(strError&&0!=strError.length||(strError=objValue.name+" : "+strMaxLen+" characters maximum "),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestMinLen(objValue,strMinLen,strError){var ret=!0;return eval(objValue.value.length)<eval(strMinLen)&&(strError&&0!=strError.length||(strError=objValue.name+" : "+strMinLen+" characters minimum  "),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestInputType(e,r,t,a){var s=!0,n=e.value.search(r);return e.value.length>0&&n>=0&&(t&&0!=t.length||(t=a),sfm_show_error_msg(t,e),s=!1),s}function TestEmail(e,r){var t=!0;return e.value.length>0&&!validateEmail(e.value)&&(r&&0!=r.length||(r=e.name+": Enter a valid Email address "),sfm_show_error_msg(r,e),t=!1),t}function TestLessThan(objValue,strLessThan,strError){var ret=!0;return isNaN(objValue.value)?(sfm_show_error_msg(objValue.name+": Should be a number ",objValue),ret=!1):eval(objValue.value)>=eval(strLessThan)&&(strError&&0!=strError.length||(strError=objValue.name+" : value should be less than "+strLessThan),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestGreaterThan(objValue,strGreaterThan,strError){var ret=!0;return isNaN(objValue.value)?(sfm_show_error_msg(objValue.name+": Should be a number ",objValue),ret=!1):eval(objValue.value)<=eval(strGreaterThan)&&(strError&&0!=strError.length||(strError=objValue.name+" : value should be greater than "+strGreaterThan),sfm_show_error_msg(strError,objValue),ret=!1),ret}function TestRegExp(e,r,t){var a=!0;return e.value.length>0&&!e.value.match(r)&&(t&&0!=t.length||(t=e.name+": Invalid characters found "),sfm_show_error_msg(t,e),a=!1),a}function TestDontSelect(e,r,t){var a=!0;return null==e.value?(sfm_show_error_msg("Error: dontselect command for non-select Item",e),a=!1):e.value==r&&(t&&0!=t.length||(t=e.name+": Please Select one option "),sfm_show_error_msg(t,e),a=!1),a}function TestSelectOneRadio(e,r){for(var t=e.form.elements[e.name],a=!1,s=0;s<t.length;s++)if("1"==t[s].checked){a=!0;break}return 0==a&&(r&&0!=r.length||(r="Please select one option from "+e.name),sfm_show_error_msg(r,e)),a}function TestFileExtension(e,r,t){var a=!1,s=!1;if(e.value.length<=0)return!0;for(var n=r.split(";"),l=0;l<n.length;l++)if(ext=e.value.substr(e.value.length-n[l].length,n[l].length),ext=ext.toLowerCase(),ext==n[l]){s=!0;break}return s?a=!0:(t&&0!=t.length||(t=e.name+" allowed file extensions are: "+r),sfm_show_error_msg(t,e),a=!1),a}function validateInput(e,r,t){var a=!0,s=e.search("="),n="",l="";switch(s>=0?(n=e.substring(0,s),l=e.substr(s+1)):n=e,n){case"req":case"required":a=TestRequiredInput(r,t);break;case"maxlength":case"maxlen":a=TestMaxLen(r,l,t);break;case"minlength":case"minlen":a=TestMinLen(r,l,t);break;case"alnum":case"alphanumeric":a=TestInputType(r,"[^A-Za-z0-9]",t,r.name+": Only alpha-numeric characters allowed ");break;case"alnum_s":case"alphanumeric_space":a=TestInputType(r,"[^A-Za-z0-9\\s]",t,r.name+": Only alpha-numeric characters and space allowed ");break;case"num":case"numeric":a=TestInputType(r,"[^0-9]",t,r.name+": Only digits allowed ");break;case"alphabetic":case"alpha":a=TestInputType(r,"[^A-Za-z]",t,r.name+": Only alphabetic characters allowed ");break;case"alphabetic_space":case"alpha_s":a=TestInputType(r,"[^A-Za-z\\s]",t,r.name+": Only alphabetic characters and space allowed ");break;case"email":a=TestEmail(r,t);break;case"lt":case"lessthan":a=TestLessThan(r,l,t);break;case"gt":case"greaterthan":a=TestGreaterThan(r,l,t);break;case"regexp":a=TestRegExp(r,l,t);break;case"dontselect":a=TestDontSelect(r,l,t);break;case"dontselectchk":a=TestDontSelectChk(r,l,t);break;case"shouldselchk":a=TestShouldSelectChk(r,l,t);break;case"selone_radio":a=TestSelectOneRadio(r,t);break;case"file_extn":a=TestFileExtension(r,l,t)}return a}function VWZ_IsListItemSelected(e,r){for(var t=0;t<e.options.length;t++)if(1==e.options[t].selected&&e.options[t].value==r)return!0;return!1}function VWZ_IsChecked(e,r){if(e.length){for(var t=0;t<e.length;t++)if("1"==e[t].checked&&e[t].value==r)return!0}else if("1"==e.checked)return!0;return!1}